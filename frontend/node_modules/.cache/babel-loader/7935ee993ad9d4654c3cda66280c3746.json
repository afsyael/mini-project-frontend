{"ast":null,"code":"import axios from 'axios'; // protected request, setiap request perlu token\n// bad idea, store in cookies (web security)\n\nconst accessToken = sessionStorage.getItem('access_token');\nconst request = axios.create({\n  baseURL: 'http://localhost:7777/' // for token\n  // headers: {\n  //     'authorization': accessToken\n  // }\n\n});\nrequest.interceptors.response.use(res => res.data, err => {\n  var _err$response;\n\n  console.log(err); // jika token salah, maka remove token pada localStorage lalu kembali ke halaman login\n\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 403) {\n    localStorage.removeItem('access_token');\n    window.location.href = '/';\n  }\n\n  throw new Error(err.message || 'Error');\n});\nexport default request;","map":{"version":3,"names":["axios","accessToken","sessionStorage","getItem","request","create","baseURL","interceptors","response","use","res","data","err","console","log","status","localStorage","removeItem","window","location","href","Error","message"],"sources":["D:/Afsya/Dibimbing Batch 7/test-react/frontend/src/helpers/request.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// protected request, setiap request perlu token\r\n\r\n// bad idea, store in cookies (web security)\r\nconst accessToken = sessionStorage.getItem('access_token');\r\n\r\nconst request = axios.create({\r\n    baseURL: 'http://localhost:7777/',\r\n    \r\n    // for token\r\n    // headers: {\r\n    //     'authorization': accessToken\r\n    // }\r\n})\r\n\r\nrequest.interceptors.response.use(\r\n    (res) => res.data,\r\n    (err) => {\r\n        console.log(err);\r\n\r\n        // jika token salah, maka remove token pada localStorage lalu kembali ke halaman login\r\n        if (err.response?.status === 403) {\r\n            localStorage.removeItem('access_token')\r\n            window.location.href = '/'\r\n        }\r\n        throw new Error(err.message || 'Error')\r\n    }\r\n)\r\n\r\nexport default request;"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;AAEA;;AACA,MAAMC,WAAW,GAAGC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAApB;AAEA,MAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;EACzBC,OAAO,EAAE,wBADgB,CAGzB;EACA;EACA;EACA;;AANyB,CAAb,CAAhB;AASAF,OAAO,CAACG,YAAR,CAAqBC,QAArB,CAA8BC,GAA9B,CACKC,GAAD,IAASA,GAAG,CAACC,IADjB,EAEKC,GAAD,IAAS;EAAA;;EACLC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EADK,CAGL;;EACA,IAAI,kBAAAA,GAAG,CAACJ,QAAJ,gEAAcO,MAAd,MAAyB,GAA7B,EAAkC;IAC9BC,YAAY,CAACC,UAAb,CAAwB,cAAxB;IACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;EACH;;EACD,MAAM,IAAIC,KAAJ,CAAUT,GAAG,CAACU,OAAJ,IAAe,OAAzB,CAAN;AACH,CAXL;AAcA,eAAelB,OAAf"},"metadata":{},"sourceType":"module"}