{"ast":null,"code":"import axios from 'axios';\nconst request = axios.create({\n  baseURL: process.env.REACT_APP_API\n});\nrequest.interceptors.request.use(async config => {\n  const token = sessionStorage.getItem('access_token');\n  config.headers = {\n    'authorization': token\n  };\n  return config;\n}, error => {\n  Promise.reject(error);\n});\nrequest.interceptors.response.use(res => res.data, err => {\n  var _err$response;\n\n  console.log(err);\n\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 403) {\n    sessionStorage.removeItem('access_token');\n    window.location.href = \"/\";\n  }\n\n  throw new Error(err.message || 'Unexpected error');\n});\nexport default request;","map":{"version":3,"names":["axios","request","create","baseURL","process","env","REACT_APP_API","interceptors","use","config","token","sessionStorage","getItem","headers","error","Promise","reject","response","res","data","err","console","log","status","removeItem","window","location","href","Error","message"],"sources":["D:/Afsya/Dibimbing Batch 7/test-react/frontend/src/request.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst request = axios.create({\r\n  baseURL: process.env.REACT_APP_API,\r\n});\r\n\r\nrequest.interceptors.request.use(\r\n  async config => {\r\n    const token = sessionStorage.getItem('access_token')\r\n    config.headers = { 'authorization': token };\r\n    return config;\r\n  },\r\n  error => {\r\n    Promise.reject(error)\r\n  });\r\n\r\nrequest.interceptors.response.use(\r\n  (res) => res.data,\r\n  (err) => {\r\n    console.log(err)\r\n    if (err.response?.status === 403) {\r\n      sessionStorage.removeItem('access_token')\r\n      window.location.href = \"/\"\r\n    } \r\n    throw new Error(err.message || 'Unexpected error')\r\n    \r\n  }\r\n)\r\n\r\nexport default request;"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAGD,KAAK,CAACE,MAAN,CAAa;EAC3BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC;AADM,CAAb,CAAhB;AAIAL,OAAO,CAACM,YAAR,CAAqBN,OAArB,CAA6BO,GAA7B,CACE,MAAMC,MAAN,IAAgB;EACd,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAd;EACAH,MAAM,CAACI,OAAP,GAAiB;IAAE,iBAAiBH;EAAnB,CAAjB;EACA,OAAOD,MAAP;AACD,CALH,EAMEK,KAAK,IAAI;EACPC,OAAO,CAACC,MAAR,CAAeF,KAAf;AACD,CARH;AAUAb,OAAO,CAACM,YAAR,CAAqBU,QAArB,CAA8BT,GAA9B,CACGU,GAAD,IAASA,GAAG,CAACC,IADf,EAEGC,GAAD,IAAS;EAAA;;EACPC,OAAO,CAACC,GAAR,CAAYF,GAAZ;;EACA,IAAI,kBAAAA,GAAG,CAACH,QAAJ,gEAAcM,MAAd,MAAyB,GAA7B,EAAkC;IAChCZ,cAAc,CAACa,UAAf,CAA0B,cAA1B;IACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;EACD;;EACD,MAAM,IAAIC,KAAJ,CAAUR,GAAG,CAACS,OAAJ,IAAe,kBAAzB,CAAN;AAED,CAVH;AAaA,eAAe5B,OAAf"},"metadata":{},"sourceType":"module"}